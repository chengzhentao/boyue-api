"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[532],{40234:function(oe,U,n){n.r(U),n.d(U,{default:function(){return we}});var z=n(5574),P=n.n(z),A=n(43285),l=n(1413),c=n(67294),T=n(42110),Z=n(91146),K=function(u,t){return c.createElement(Z.Z,(0,l.Z)((0,l.Z)({},u),{},{ref:t,icon:T.Z}))},w=c.forwardRef(K),G=w,M=n(90930),Q=n(91448),_=n(34994),$=n(97685),F=n(91),Y=n(21770),O=n(53025),m=n(55241),g=n(97435),h=n(62350),e=n(85893),ne=["fieldProps","proFieldProps"],le=["fieldProps","proFieldProps"],W="text",ae=function(u){var t=u.fieldProps,v=u.proFieldProps,d=(0,F.Z)(u,ne);return(0,e.jsx)(h.Z,(0,l.Z)({valueType:W,fieldProps:t,filedConfig:{valueType:W},proFieldProps:v},d))},ie=function(u){var t=(0,Y.Z)(u.open||!1,{value:u.open,onChange:u.onOpenChange}),v=(0,$.Z)(t,2),d=v[0],f=v[1];return(0,e.jsx)(O.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(D){var E,k=D.getFieldValue(u.name||[]);return(0,e.jsx)(m.Z,(0,l.Z)((0,l.Z)({getPopupContainer:function(o){return o&&o.parentNode?o.parentNode:o},onOpenChange:function(o){return f(o)},content:(0,e.jsxs)("div",{style:{padding:"4px 0"},children:[(E=u.statusRender)===null||E===void 0?void 0:E.call(u,k),u.strengthText?(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)("span",{children:u.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},u.popoverProps),{},{open:d,children:u.children}))}})},de=function(u){var t=u.fieldProps,v=u.proFieldProps,d=(0,F.Z)(u,le),f=(0,c.useState)(!1),B=(0,$.Z)(f,2),D=B[0],E=B[1];return t!=null&&t.statusRender&&d.name?(0,e.jsx)(ie,{name:d.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:D,onOpenChange:E,children:(0,e.jsx)("div",{children:(0,e.jsx)(h.Z,(0,l.Z)({valueType:"password",fieldProps:(0,l.Z)((0,l.Z)({},(0,g.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(j){var o;t==null||(o=t.onBlur)===null||o===void 0||o.call(t,j),E(!1)},onClick:function(j){var o;t==null||(o=t.onClick)===null||o===void 0||o.call(t,j),E(!0)}}),proFieldProps:v,filedConfig:{valueType:W}},d))})}):(0,e.jsx)(h.Z,(0,l.Z)({valueType:"password",fieldProps:t,proFieldProps:v,filedConfig:{valueType:W}},d))},H=ae;H.Password=de,H.displayName="ProFormComponent";var x=H,se=["fieldProps","min","proFieldProps","max"],pe=function(u,t){var v=u.fieldProps,d=u.min,f=u.proFieldProps,B=u.max,D=(0,F.Z)(u,se);return(0,e.jsx)(h.Z,(0,l.Z)({valueType:"digit",fieldProps:(0,l.Z)({min:d,max:B},v),ref:t,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:f},D))},ce=c.forwardRef(pe),V=ce,S=n(66758),ve=["proFieldProps","fieldProps"],J="date",me=c.forwardRef(function(a,u){var t=a.proFieldProps,v=a.fieldProps,d=(0,F.Z)(a,ve),f=(0,c.useContext)(S.Z);return(0,e.jsx)(h.Z,(0,l.Z)({ref:u,valueType:J,fieldProps:(0,l.Z)({getPopupContainer:f.getPopupContainer},v),proFieldProps:t,filedConfig:{valueType:J,customLightMode:!0}},d))}),Pe=me,fe=["proFieldProps","fieldProps"],X="dateMonth",he=c.forwardRef(function(a,u){var t=a.proFieldProps,v=a.fieldProps,d=(0,F.Z)(a,fe),f=(0,c.useContext)(S.Z);return(0,e.jsx)(h.Z,(0,l.Z)({ref:u,valueType:X,fieldProps:(0,l.Z)({getPopupContainer:f.getPopupContainer},v),proFieldProps:t,filedConfig:{valueType:X,customLightMode:!0}},d))}),Fe=he,xe=["fieldProps"],q="dateQuarter",ge=c.forwardRef(function(a,u){var t=a.fieldProps,v=(0,F.Z)(a,xe),d=(0,c.useContext)(S.Z);return(0,e.jsx)(h.Z,(0,l.Z)({ref:u,valueType:q,fieldProps:(0,l.Z)({getPopupContainer:d.getPopupContainer},t),filedConfig:{valueType:q,customLightMode:!0}},v))}),Ce=ge,Ee=["proFieldProps","fieldProps"],ee="dateWeek",ye=c.forwardRef(function(a,u){var t=a.proFieldProps,v=a.fieldProps,d=(0,F.Z)(a,Ee),f=(0,c.useContext)(S.Z);return(0,e.jsx)(h.Z,(0,l.Z)({ref:u,valueType:ee,fieldProps:(0,l.Z)({getPopupContainer:f.getPopupContainer},v),proFieldProps:t,filedConfig:{valueType:ee,customLightMode:!0}},d))}),Be=ye,je=["proFieldProps","fieldProps"],re="dateYear",Te=c.forwardRef(function(a,u){var t=a.proFieldProps,v=a.fieldProps,d=(0,F.Z)(a,je),f=(0,c.useContext)(S.Z);return(0,e.jsx)(h.Z,(0,l.Z)({ref:u,valueType:re,fieldProps:(0,l.Z)({getPopupContainer:f.getPopupContainer},v),proFieldProps:t,filedConfig:{valueType:re,customLightMode:!0}},d))}),Ze=Te,R=Pe;R.Week=Be,R.Month=Fe,R.Quarter=Ce,R.Year=Ze,R.displayName="ProFormComponent";var te=R,be=n(55136),b=n(2453),De=n(86738),Ae=n(14726),_e=n(28248),Re=function(){var u=(0,c.useState)(1),t=P()(u,2),v=t[0],d=t[1],f=(0,c.useState)(10),B=P()(f,2),D=B[0],E=B[1],k=(0,c.useState)({open:!1,edit:!1}),j=P()(k,2),o=j[0],L=j[1],Me=(0,c.useState)(),ue=P()(Me,2),r=ue[0],N=ue[1],I=(0,c.useRef)(),Oe=function(s){return(0,A.lA)({id:s}).then(function(i){N(i.data),L({open:!0,edit:!1})})},Se=function(s){return(0,A.$c)({id:s}).then(function(i){var p;i.msg?b.ZP.error(i.msg):b.ZP.success("\u5220\u9664\u6210\u529F"),(p=I.current)===null||p===void 0||p.reload()}).catch(function(i){var p;console.log(i),b.ZP.error("\u5220\u9664\u8BA2\u5355\u5931\u8D25"),(p=I.current)===null||p===void 0||p.reload()})},ke=function(s){if(s.details.length===0){b.ZP.error("\u8BF7\u6DFB\u52A0\u7EF4\u4FEE\u660E\u7EC6");return}return(0,A.a1)(s).then(function(i){var p;i.msg?b.ZP.error(i.msg):b.ZP.success("\u64CD\u4F5C\u6210\u529F"),L({open:!1,edit:!1}),N(void 0),(p=I.current)===null||p===void 0||p.reload()}).catch(function(i){var p;console.log(i),b.ZP.error("\u4FDD\u5B58\u8BA2\u5355\u5931\u8D25"),(p=I.current)===null||p===void 0||p.reload()})},Ie=[{title:"\u7EF4\u4FEE\u5355\u53F7",dataIndex:"orderNo",search:!0},{title:"\u5BA2\u6237\u540D\u79F0",dataIndex:"partnerName",search:!0},{title:"\u5BA2\u6237\u7535\u8BDD",dataIndex:"phone",search:!0},{title:"\u8F66\u724C\u53F7",dataIndex:"carNo",search:!0},{title:"\u8FDB\u5382\u65E5\u671F",dataIndex:"inTime",search:!1},{title:"\u51FA\u573A\u65E5\u671F",dataIndex:"inTime",search:!1},{title:"\u7EF4\u4FEE\u91D1\u989D",dataIndex:"totalMoney",search:!1},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(s,i){return[(0,e.jsx)("a",{onClick:function(){var C;Oe((C=i.id)!==null&&C!==void 0?C:0)},children:"\u67E5\u770B\u660E\u7EC6"},i.id+"edit"),(0,e.jsx)(De.Z,{title:"\u4F60\u786E\u5B9A\u5220\u9664\u5417\uFF0C\u5220\u9664\u540E\u6570\u636E\u5C06\u4E0D\u53EF\u6062\u590D?",onConfirm:function(){var C;return Se((C=i.id)!==null&&C!==void 0?C:0)},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("a",{children:" \u5220\u9664"},i.id+"\u5220\u9664")},i.id),(0,e.jsx)("a",{onClick:function(){window.open("/web/order/print?id="+i.id)},children:"\u6253\u5370"},i.id+"print")]}}],Ue=function(s){var i,p;return d((i=s==null?void 0:s.current)!==null&&i!==void 0?i:1),E((p=s==null?void 0:s.pageSize)!==null&&p!==void 0?p:10),(0,A.pb)(s).then(function(C){return{data:C.data.records,success:!0,total:C.data.total}})};return(0,e.jsxs)(M._z,{children:[(0,e.jsx)(Q.Z,{request:function(s){return Ue(s)},actionRef:I,pagination:{pageSize:D,current:v},columns:Ie,rowKey:function(s){return s.id},toolBarRender:function(){return[(0,e.jsxs)(Ae.ZP,{type:"primary",onClick:function(){N(void 0),L({open:!0,edit:!0})},children:[(0,e.jsx)(G,{})," \u65B0\u589E\u5355\u53F7"]},"primary")]}}),(0,e.jsx)(_e.Z,{open:o.open,onCancel:function(){N(void 0),L({open:!1,edit:!1})},destroyOnClose:!0,footer:null,width:1200,children:(0,e.jsxs)(_.A,{layout:"vertical",grid:!0,rowProps:{gutter:[16,0]},submitter:o.edit?{}:!1,onFinish:function(s){return ke(s)},children:[(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"partnerName",label:"\u5BA2\u6237\u540D\u79F0",width:250,tooltip:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0",disabled:!o.edit,rules:[{required:!0}],initialValue:r&&(r==null?void 0:r.partnerName)}),(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"phone",label:"\u5BA2\u6237\u624B\u673A\u53F7",width:250,tooltip:"\u8BF7\u8F93\u5165\u7B26\u5408\u89C4\u8303\u7684\u624B\u673A\u53F7",disabled:!o.edit,initialValue:r&&(r==null?void 0:r.phone)}),(0,e.jsx)(V,{colProps:{md:12,xl:8},name:"length",label:"\u8FDB\u5382\u91CC\u7A0B",width:250,tooltip:"\u8FDB\u5382\u91CC\u7A0B",disabled:!o.edit,initialValue:r&&(r==null?void 0:r.length)}),(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"carNo",label:"\u8F66\u724C\u53F7",width:250,tooltip:"\u8BF7\u8F93\u5165\u8F66\u724C\u53F7",rules:[{required:!0}],disabled:!o.edit,initialValue:r&&(r==null?void 0:r.carNo)}),(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"carType",label:"\u8F66\u8F86\u7C7B\u578B",width:250,tooltip:"\u8BF7\u8F93\u5165\u8F66\u724C\u53F7",rules:[{required:!0}],disabled:!o.edit,initialValue:r&&(r==null?void 0:r.carType)}),(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"maintainType",label:"\u7EF4\u4FEE\u7C7B\u578B",width:250,tooltip:"\u8BF7\u8F93\u5165\u7EF4\u4FEE\u7C7B\u578B",disabled:!o.edit,initialValue:r&&(r==null?void 0:r.maintainType)}),(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"receiveUser",label:"\u63A5\u8F66\u4EBA",width:250,tooltip:"\u8BF7\u8F93\u5165\u8F66\u724C\u53F7",disabled:!o.edit,initialValue:r&&(r==null?void 0:r.receiveUser)}),(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"maintainUser",label:"\u7EF4\u4FEE\u4EBA\u5458",width:250,tooltip:"\u8BF7\u8F93\u5165\u7EF4\u4FEE\u4EBA\u5458",disabled:!o.edit,initialValue:r&&(r==null?void 0:r.maintainUser)}),(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"operatorUser",label:"\u64CD\u4F5C\u4EBA\u5458",width:250,tooltip:"\u8BF7\u8F93\u5165\u8F66\u724C\u53F7",disabled:!o.edit,initialValue:r&&(r==null?void 0:r.operatorUser)}),(0,e.jsx)(te,{colProps:{md:12,xl:8},name:"inTime",label:"\u5165\u573A\u65F6\u95F4",width:250,placeholder:"\u8BF7\u9009\u62E9",tooltip:"\u8BF7\u9009\u62E9\u5165\u573A\u65F6\u95F4",rules:[{required:!0}],disabled:!o.edit,initialValue:r&&(r==null?void 0:r.inTime)}),(0,e.jsx)(te,{colProps:{md:12,xl:8},name:"outTime",label:"\u51FA\u573A\u65F6\u95F4",width:250,tooltip:"\u8BF7\u9009\u62E9\u51FA\u573A\u65F6\u95F4",placeholder:"\u8BF7\u9009\u62E9",rules:[{required:!0}],disabled:!o.edit,initialValue:r&&(r==null?void 0:r.outTime)}),(0,e.jsx)(x,{colProps:{md:12,xl:8},name:"orderNo",label:"\u7EF4\u4FEE\u5355\u53F7",width:250,tooltip:"\u7CFB\u7EDF\u9ED8\u8BA4",disabled:!0,placeholder:"\u7CFB\u7EDF\u9ED8\u8BA4",initialValue:r&&(r==null?void 0:r.orderNo)}),(0,e.jsx)(be.u,{name:"details",initialValue:r&&r.details,creatorButtonProps:o.edit?{position:"bottom",creatorButtonText:"\u7EF4\u4FEE\u660E\u7EC6"}:!1,copyIconProps:o.edit?{}:!1,deleteIconProps:o.edit?{}:!1,children:(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(x,{colProps:{xs:5,sm:5,md:5,xl:3},name:"name",label:"\u7EF4\u4FEE\u9879\u76EE",width:"md",tooltip:"\u7CFB\u7EDF\u9ED8\u8BA4",placeholder:"\u9879\u76EE\u540D\u79F0",disabled:!o.edit,rules:[{required:!0,max:50,message:"\u8BF7\u5C11\u4E8E50\u4E2A\u6C49\u5B57"}]}),(0,e.jsx)(V,{colProps:{xs:3,sm:3,md:3,xl:2},name:"number",label:"\u6570\u91CF",width:"md",tooltip:"\u8F93\u5165\u6570\u5B57\u7C7B\u578B",placeholder:"\u6570\u91CF",disabled:!o.edit,rules:[{required:!0}]}),(0,e.jsx)(x,{colProps:{xs:2.5,sm:2.5,md:2.5,xl:2},name:"unit",label:"\u5355\u4F4D",width:"md",tooltip:"\u5355\u4F4D",placeholder:"\u6570\u91CF",disabled:!o.edit,rules:[{required:!0,max:10,message:"\u8BF7\u5C11\u4E8E10\u4E2A\u6C49\u5B57"}]}),(0,e.jsx)(V,{colProps:{xs:3,sm:3,md:3,xl:2},name:"price",label:"\u4EF7\u683C",width:"sm",tooltip:"\u8F93\u5165\u6570\u5B57\u7C7B\u578B",placeholder:"\u4EF7\u683C",disabled:!o.edit,rules:[{required:!0}]}),(0,e.jsx)(V,{colProps:{xs:3,sm:3,md:3,xl:2},name:"total",label:"\u91D1\u989D",width:"sm",tooltip:"",placeholder:"\u91D1\u989D",disabled:!o.edit,rules:[{required:!0}]}),(0,e.jsx)(x,{colProps:{xs:6,sm:6,md:6,xl:4},name:"remark",label:"\u5907\u6CE8",width:"md",tooltip:"\u5907\u6CE8",placeholder:"\u5907\u6CE8",disabled:!o.edit,rules:[{max:120,message:"\u8BF7\u5C11\u4E8E120\u4E2A\u6C49\u5B57"}]})]})})]})})]})},we=Re},43285:function(oe,U,n){n.d(U,{$c:function(){return $},a1:function(){return Q},lA:function(){return G},ll:function(){return Y},pb:function(){return K}});var z=n(15009),P=n.n(z),A=n(97857),l=n.n(A),c=n(99289),T=n.n(c),Z=n(88275);function K(m){return w.apply(this,arguments)}function w(){return w=T()(P()().mark(function m(g){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/order/list",{method:"GET",params:l()({},g||{})}));case 1:case"end":return e.stop()}},m)})),w.apply(this,arguments)}function G(m){return M.apply(this,arguments)}function M(){return M=T()(P()().mark(function m(g){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/order/detail",{method:"GET",params:l()({},g||{})}));case 1:case"end":return e.stop()}},m)})),M.apply(this,arguments)}function Q(m){return _.apply(this,arguments)}function _(){return _=T()(P()().mark(function m(g){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/order/save",{method:"post",data:g}));case 1:case"end":return e.stop()}},m)})),_.apply(this,arguments)}function $(m){return F.apply(this,arguments)}function F(){return F=T()(P()().mark(function m(g){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/order/delete",{method:"post",data:g}));case 1:case"end":return e.stop()}},m)})),F.apply(this,arguments)}function Y(m){return O.apply(this,arguments)}function O(){return O=T()(P()().mark(function m(g){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/detail/list",{method:"GET",params:l()({},g||{})}));case 1:case"end":return e.stop()}},m)})),O.apply(this,arguments)}}}]);
